!!! 5
html
  head
    title Gifting Blockâ„¢ - Products Discovery
    meta(name='viewport', content='width=device-width, initial-scale=1')
    meta(content='text/html; charset=UTF-8', http-equiv='Content-Type')
    // Loading Bootstrap
    link(href='bootstrap/css/bootstrap.css', rel='stylesheet')
    link(href='bootstrap/css/bootstrap-responsive.css', rel='stylesheet')
    // Loading Custom CSS
    link(href='css/custom.css', rel='stylesheet')
    // Loading Flat UI
    link(href='css/flat-ui.css', rel='stylesheet')
    link(rel='shortcut icon', href='images/favicon.ico')
    link(rel='stylesheet', href='css/divshot.css')
    // Global CSS for the page and tiles
    link(rel='stylesheet', href='css/main.css')
  body.discovery
    input(type="hidden", id="productsdata", value="#{productList}")
    // BEGIN TOP BAR
    .navbar.navbar-inverse
      .navbar-inner
        .container-fluid
          button.btn.btn-navbar(type='button', data-toggle='collapse', data-target='.nav-collapse')
            span.icon-bar
            span.icon-bar
            span.icon-bar
          a.brand(href='#')
            img(src='img/finale-logo.png')
          .nav-collapse.collapse
            ul.nav
              li.offset1
                a
                  form#searchSubmit(action='productdiscovery')
                    .input-append
                      input#search.input-xxlarge(type='text', name='Search', value="#{search}")
                      span.add-on
                        i.fui-eye(style='color: #000;')
            ul.nav.pull-right.hidden-tablet(style='margin-top: 15px; margin-left: 15px; margin-right: 50px;')
              li
                a(href='#')
                  img(src='img/little-box.png', width='24px', height='24px')
                  span.hidden-desktop Notifications
                  span.navbar-new-bt 1
              li
                a(href='./profile')
                  span.fui-user
                  span.hidden-desktop My Profile
                ul
                  li
                    a(href='./edit-profile')
                      i.icon-pencil.icon-white
                      | Edit Your Profile
                  li.divider
                  li
                    a(href='#')
                      i.icon-th-large.icon-white
                      | Find Friends
                  li
                    a(href='mailto:support@giftingblock.com')
                      i.icon-envelope.icon-white
                      | Contact Support
              li.active
                a(href='./productdiscovery')
                  img(src='img/cart.png', width='24px', height='24px')
                  span.hidden-desktop  Browse Products
                ul
                  li
                    a(href='./shopping-cart')
                      i.icon-shopping-cart.icon-white
                      | My Shopping Cart
              li
                a(href='./settings')
                  span.fui-gear
                  span.hidden-desktop Settings
                ul(style='width: 125px;')
                  li
                    a(href='./logout')
                      i.icon-off.icon-white
                      | Log Out
          // /.nav-collapse
        // /.container-fluid
    // /.container
    // END TOP BAR
    .container-fluid.hidden-phone
      .row-fluid
        .span12
          .row-fluid
            button.btn.btn-discovery.btn-lg(type='button') Friends' Favorites
            button.btn.btn-discovery.btn-lg(type='button') Popular items
            .navbar.navbar-inverse
              .navbar-inner
                .container
                  // <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target="#nav-collapse-01"></button>
                  #nav-collapse-01.nav-collapse.collapse
                    ul.nav
                      li.active
                        a(href='#fakelink')
                          | Categories
                          span.caret.pull-right(style='margin-right: 0px; margin-top: 6px; border-top-color: white;')
                        ul
                          li
                            a(href='#fakelink') Element One
                          li
                            a(href='#fakelink') Sub menu
                            ul
                              li
                                a(href='#fakelink') Element One
                              li
                                a(href='#fakelink') Element Two
                              li
                                a(href='#fakelink') Element Three
                            // /Sub menu
                          li
                            a(href='#fakelink') Element Three
                        // /Sub menu
                  // /.nav
            style
              .container-fluid .navbar{
              width:220px;
              display:inline-block;
              margin-bottom:0;
              height:41px;
              float:left;
              margin-left:10px;
              }
              .container-fluid .navbar *{
              margin-bottom:0;
              }
              .container-fluid .navbar{
              padding-left:0px!important;
              padding-right:0px!important;
              }
              .container-fluid .navbar .navbar-inner{
              border-radius:6px!important;
              background: white;
              }
              .container-fluid .navbar .navbar-inner #nav-collapse-01{
              height:100%!important;
              }
              .container-fluid .navbar .nav{
              width:100%;
              margin-left:0!important;
              }
              .container-fluid .navbar .nav li{
              width:100%;
              margin-left:0!important;
              }
              .container-fluid .navbar .navbar-inner li a{
              border-radius:6px!important;
              padding:10px 20px;
              text-align:center;
              font-weight:100;
              /* background-color:#1abc9c;;
              border-color:#1abc9c;           */
              }
              .container-fluid .navbar .nav > .active > a, .navbar .nav > .active > a:hover, .navbar .nav > .active > a:focus {
              background-color:#1abc9c!important;
              border-color:#1abc9c!important;
              }
              .container-fluid .navbar .nav a:hover{
              background-color:#1abc9c!important;
              }
              .container-fluid .navbar .nav .active a:hover{
              background-color:#1abc9c!important;
              border-bottom-color:#1abc9c!important;
              }
            input.input-xlarge.pull-right.search-friend(type='text', placeholder='shop for a friend...')
          // end header
          // start image part
          .row-fluid
            #main(role='main')
              ul#tiles
                // These are our grid blocks
                -for(var i=0; i<imageList.length; i++){
                li
                  img(src=imageList[i], width="200")
                  input(type='hidden',id="tileasin", value="#{asinList[i]}")
                  input.property(type='hidden', value="")
                  .btn-group.select.select-block.save
                    i.dropdown-arrow.dropdown-arrow-inverse
                    button.btn.dropdown-toggle.clearfix(data-toggle='dropdown', style="height:40px;")
                      span.filter-option.pull-left Save to list
                      span.caret(style="margin-top:0px;")
                    ul.dropdown-menu.dropdown-inverse(role='menu', style='overflow-y: auto; min-height: 118px; max-height: 205px;')
                   
                  button.btn.btn-primary.btn-lg.remove(type='button', id='removeCls', value="#{asinList[i]}") Remove from list
                  button.btn.btn-discovery.btn-lg(type='button', id='getItem', asin="#{asinList[i]}")
                    | Get it now
                    span.pull-right
                -}
                
    script(src='js/jquery-1.8.3.min.js')
    script(src='http://code.jquery.com/ui/1.10.3/jquery-ui.js')
    script(src='js/jquery.ui.touch-punch.min.js')
    script(src='js/bootstrap.min.js')
    script(src='js/bootstrap-select.js')
    script(src='js/bootstrap-switch.js')
    script(src='js/flatui-checkbox.js')
    script(src='js/flatui-radio.js')
    script(src='js/jquery.tagsinput.js')
    script(src='js/jquery.placeholder.js')
    script(src='js/jquery.stacktable.js')
    script(src='js/application.js')
    script(src='js/qdiscovery.js')
    script
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
      ga('create', 'UA-40554682-2', 'giftingblock.com');
      ga('send', 'pageview');
    script(src='js/jquery.imagesloaded.js')
    // Include the plug-in
    script(src='js/jquery.wookmark.js')
    // Once the page is loaded, initalize the plug-in.
    script(type='text/javascript')
      (function ($){

      $('#tiles').imagesLoaded(function() {
         // Prepare layout options.
        var options = {
        autoResize: true, // This will auto-update the layout when the browser window is resized.
        container: $('#main'), // Optional, used for some extra CSS styling
        offset: 5, // Optional, the distance between grid items
        outerOffset: 10, // Optional, the distance to the containers border
        itemWidth: 210 // Optional, the width of a grid item
        };
        // Get a reference to your grid items.
        var handler = $('#tiles>li');
        // Call the layout function.
        handler.wookmark(options);
        // Capture clicks on grid items.
        var g_asin= "";
        handler.click(function(){
          var asin = $(this).children("#tileasin").val();
          var selected_li = $(this);
          g_asin = asin;
          $("ul.dropdown-menu.dropdown-inverse").html("");
        $.post("/productdiscovery/getList",{asin:asin}, function(data){
        
          if(data == "no")
          {
            selected_li.children("input.property").val("active");
            selected_li.addClass("deactive");
          }
          else
          {
           //alert(data);
           selected_li.children("div").children("ul.dropdown-menu.dropdown-inverse").html(data);
           selected_li.children("input.property").val("deactive");
           selected_li.addClass("active");
         
          }

          if(selected_li.children('input.property').val()=="active"){
           $('#tiles .active').removeClass('active');
           $('#tiles .deactive').removeClass('deactive');
           selected_li.addClass('active');
           ///remove to list
           }
           else{
              $('#tiles .active').removeClass('active');
              $('#tiles .deactive').removeClass('deactive');
              selected_li.addClass('deactive');
           }

           $(".listItemCls").click(function(){
             
             var name = $(this).find("a").attr("value");
             
             $.post("/add-product", {asin:g_asin, listname:name}, function(data){
                alert(data);
               })
            });

           $("button.btn.btn-primary.btn-lg.remove").click(function(){
                var asin = $(this).attr("value");

                $.post("/list/del-product", {asin:asin}, function(data){
                   //alert(data);
                 });

            });
                      
          });
      
          handler.wookmark();

         }); 
       }); 

      })(jQuery);
